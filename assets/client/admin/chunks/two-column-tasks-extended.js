"use strict";(self.webpackChunk_wcAdmin_webpackJsonp=self.webpackChunk_wcAdmin_webpackJsonp||[]).push([[1920,6147,7108],{42943:function(e,t,s){s.r(t),s.d(t,{TaskList:function(){return E},default:function(){return w}});var o=s(5267),n=s(69307),a=s(65736),i=s(55609),c=s(9818),l=s(86020),r=s(67221),m=s(14599),d=s(14812),_=s(10431),u=s(79298);const k=e=>{var t;let{isExpandable:s=!1,isExpanded:i=!1,setExpandedTask:l,task:k}=e;const{createNotice:p}=(0,c.useDispatch)("core/notices"),{dismissTask:E,snoozeTask:w,undoDismissTask:h,undoSnoozeTask:f}=(0,c.useDispatch)(r.ONBOARDING_STORE_NAME),b=(0,r.useUserPreferences)(),{actionLabel:g,actionUrl:N,content:T,id:v,isComplete:C,isDismissable:O,isSnoozeable:S,time:x,title:D,level:I,additionalInfo:R}=k,L=(0,d.useSlot)(`woocommerce_onboarding_task_list_item_${v}`),y=Boolean(null==L||null===(t=L.fills)||void 0===t?void 0:t.length),A=(0,n.useCallback)((()=>{E(v),p("success",(0,a.__)("Task dismissed"),{actions:[{label:(0,a.__)("Undo","woocommerce-admin"),onClick:()=>h(v)}]})}),[v]),B=(0,n.useCallback)((()=>{w(v),p("success",(0,a.__)("Task postponed until tomorrow","woocommerce-admin"),{actions:[{label:(0,a.__)("Undo","woocommerce-admin"),onClick:()=>f(v)}]})}),[v]),z=(0,n.useCallback)((()=>{N?N.startsWith("http")?window.location.href=N:(0,_.getHistory)().push((0,_.getNewPath)({},N,{})):(window.document.documentElement.scrollTop=0,(0,_.updateQueryString)({task:v}))}),[v,C,N]),M={expandable:s,expanded:s&&i,completed:C,onSnooze:S&&B,onDismiss:O&&A},P=(0,n.useCallback)((e=>{const t=()=>((0,m.recordEvent)("tasklist_click",{task_name:v}),C||(()=>{const e=(()=>{const e=b.task_list_tracked_started_tasks;return e&&e[v]?e[v]:0})()+1,t=b.task_list_tracked_started_tasks||{};b.updateUserPreferences({task_list_tracked_started_tasks:{...t||{},[v]:e}})})(),e.onClick?e.onClick():z());return(0,n.createElement)(d.TaskItem,(0,o.Z)({key:v,title:D,content:T,additionalInfo:R,time:x,action:t,level:I,actionLabel:g},M,e,{onClick:!s||C?t:()=>l(v)}))}),[v,D,T,x,g,s,C]);return y?(0,n.createElement)(u.WooOnboardingTaskListItem.Slot,{id:v,fillProps:{defaultTaskItem:P,isComplete:C,...M}}):(0,n.createElement)(P,{onClick:k.onClick})},p=e=>{let{id:t}=e;const{hideTaskList:s}=(0,c.useDispatch)(r.ONBOARDING_STORE_NAME);return(0,n.createElement)("div",{className:"woocommerce-card__menu woocommerce-card__header-item"},(0,n.createElement)(l.EllipsisMenu,{label:(0,a.__)("Task List Options","woocommerce-admin"),renderContent:()=>(0,n.createElement)("div",{className:"woocommerce-task-card__section-controls"},(0,n.createElement)(i.Button,{onClick:()=>s(t)},(0,a.__)("Hide this","woocommerce-admin")))}))},E=e=>{var t;let{id:s,eventPrefix:_,tasks:u,title:E,isCollapsible:w=!1,isExpandable:h=!1,query:f}=e;const{profileItems:b}=(0,c.useSelect)((e=>{const{getProfileItems:t}=e(r.ONBOARDING_STORE_NAME);return{profileItems:t()}})),g=(0,n.useRef)(f),N=Date.now(),T=u.filter((e=>!e.isDismissed&&(!e.isSnoozed||e.snoozedUntil<N))),v=u.filter((e=>!e.isComplete&&!e.isDismissed)),[C,O]=(0,n.useState)(null===(t=v[0])||void 0===t?void 0:t.id);if((0,n.useEffect)((()=>{(0,m.recordEvent)(_+"view",{number_tasks:T.length,store_connected:b.wccom_connected})}),[]),(0,n.useEffect)((()=>{const{task:e}=g.current,{task:t}=f;e!==t&&(window.document.documentElement.scrollTop=0,g.current=f)}),[f]),!T.length)return(0,n.createElement)("div",{className:"woocommerce-task-dashboard__container"});const S=(0,a.sprintf)((0,a._n)("Show %d more task.","Show %d more tasks.",T.length-2,"woocommerce-admin"),T.length-2),x=(0,a.__)("Show less","woocommerce-admin"),D=w?d.CollapsibleList:d.List,I=w?{collapseLabel:x,expandLabel:S,show:2,onCollapse:()=>(0,m.recordEvent)(_+"collapse",{}),onExpand:()=>(0,m.recordEvent)(_+"expand",{})}:{};return(0,n.createElement)(n.Fragment,null,(0,n.createElement)("div",{className:"woocommerce-task-dashboard__container woocommerce-task-list__"+s},(0,n.createElement)(i.Card,{size:"large",className:"woocommerce-task-card woocommerce-homescreen-card"},(0,n.createElement)(i.CardHeader,{size:"medium"},(0,n.createElement)("div",{className:"wooocommerce-task-card__header"},(0,n.createElement)(d.Text,{size:"20",lineHeight:"28px",variant:"title.small"},E),(0,n.createElement)(l.Badge,{count:v.length})),(0,n.createElement)(p,{id:s})),(0,n.createElement)(D,(0,o.Z)({animation:"custom"},I),T.map((e=>(0,n.createElement)(k,{key:e.id,isExpanded:C===e.id,isExpandable:h,task:e,setExpandedTask:O})))))))};var w=E},57038:function(e,t,s){s.r(t);var o=s(69307),n=s(65736),a=s(55609),i=s(70644),c=s(9818),l=s(67221),r=s(14599),m=s(27240),d=s(42943),_=s(76388);t.default=e=>{let{query:t}=e;const{hideTaskList:s}=(0,c.useDispatch)(l.ONBOARDING_STORE_NAME),{updateOptions:u}=(0,c.useDispatch)(l.OPTIONS_STORE_NAME),{task:k}=t,{isResolving:p,taskLists:E}=(0,c.useSelect)((e=>({isResolving:e(l.ONBOARDING_STORE_NAME).isResolving("getTaskListsByIds"),taskLists:e(l.ONBOARDING_STORE_NAME).getTaskListsByIds(["extended_two_column"])})));if((0,o.useEffect)((()=>{u({woocommerce_task_list_prompt_shown:!0})}),[E,p]),k)return null;if(p)return(0,o.createElement)(_.S,{query:t});const w=E[0];if(!w||0===w.tasks.length)return null;const h=w.tasks.filter((e=>e.completed)).length===w.tasks.length,{id:f,eventPrefix:b,isHidden:g,isVisible:N,isToggleable:T,title:v,tasks:C}=w;return N?(0,o.createElement)(o.Fragment,{key:f},(0,o.createElement)(d.TaskList,{id:f,eventPrefix:b,isComplete:h,query:t,tasks:C,title:v}),T&&(0,o.createElement)(m.z,null,(0,o.createElement)(a.MenuGroup,{className:"woocommerce-layout__homescreen-display-options",label:(0,n.__)("Display","woocommerce-admin")},(0,o.createElement)(a.MenuItem,{className:"woocommerce-layout__homescreen-extension-tasklist-toggle",icon:!g&&i.Z,isSelected:!g,role:"menuitemcheckbox",onClick:()=>(e=>{const{id:t,isHidden:o}=e,n=!o;(0,r.recordEvent)(n?`${t}_tasklist_hide`:`${t}_tasklist_show`,{}),s(t)})(w)},(0,n.__)("Show things to do next","woocommerce-admin"))))):null}}}]);