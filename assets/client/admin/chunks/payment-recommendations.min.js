"use strict";(self.webpackChunk_wcAdmin_webpackJsonp=self.webpackChunk_wcAdmin_webpackJsonp||[]).push([[5396],{64329:function(e,t,n){n.d(t,{a:function(){return o}});var a=n(9818);function o(e){const{createNotice:t}=(0,a.dispatch)("core/notices");e.error_data&&e.errors&&Object.keys(e.errors).length?Object.keys(e.errors).forEach((n=>{t("error",e.errors[n].join(" "))})):e.message&&t(e.code?"error":"success",e.message)}},12915:function(e,t,n){n.r(t);var a=n(69307),o=n(65736),r=n(9818),c=n(22629),i=n(55609),s=n(86020),m=n(14812),l=n(67221),d=n(14599),u=n(72672),p=n(64329),_=n(462);const g=document.querySelector('[data-gateway_id="pre_install_woocommerce_payments_promotion"]');t.default=()=>{const[e,t]=(0,a.useState)(null),[n,y]=(0,a.useState)(!1),[w,f]=(0,a.useState)(!1),{installAndActivatePlugins:h,dismissRecommendedPlugins:E}=(0,r.useDispatch)(l.PLUGINS_STORE_NAME),{createNotice:v}=(0,r.useDispatch)("core/notices"),{installedPaymentGateway:O,installedPaymentGateways:b,paymentGatewaySuggestions:N,isResolving:S}=(0,r.useSelect)((t=>{const n=w&&(0,_.V)(e);return{installedPaymentGateway:n&&t(l.PAYMENT_GATEWAYS_STORE_NAME).getPaymentGateway(n),installedPaymentGateways:t(l.PAYMENT_GATEWAYS_STORE_NAME).getPaymentGateways().reduce(((e,t)=>(n===t.id||(e[t.id]=!0),e)),{}),isResolving:t(l.ONBOARDING_STORE_NAME).isResolving("getPaymentGatewaySuggestions"),paymentGatewaySuggestions:t(l.ONBOARDING_STORE_NAME).getPaymentGatewaySuggestions()}}),[w]),A=(0,a.useRef)(!1),k=N&&N.length>0&&!n;if((0,a.useEffect)((()=>{if((k||g&&!S)&&!A.current){A.current=!0;const e=(N||[]).reduce(((e,t)=>t.plugins&&t.plugins.length>0?{...e,[t.plugins[0].replace(/\-/g,"_")+"_displayed"]:!0}:e),{woocommerce_payments_displayed:!!g});(0,d.recordEvent)("settings_payments_recommendations_pageview",e)}}),[k,g,S]),(0,a.useEffect)((()=>{O&&(window.location.href=O.settings_url)}),[O]),!k)return null;const G=async()=>{y(!0),(0,d.recordEvent)("settings_payments_recommendations_dismiss",{}),await E("payments")||(y(!1),v("error",(0,o.__)('There was a problem hiding the "Additional ways to get paid" card.',"woocommerce-admin")))},P=(N||[]).filter((e=>{var t;return!b[e.id]&&(null===(t=e.plugins)||void 0===t?void 0:t.length)&&(!window.wcAdminFeatures["wc-pay-promotion"]||!e.id.startsWith("woocommerce_payments"))})).map((n=>({key:n.id,title:(0,a.createElement)(a.Fragment,null,n.title,n.recommended&&(0,a.createElement)(s.Pill,null,(0,o.__)("Recommended","woocommerce-admin"))),content:(0,c.decodeEntities)(n.content),after:(0,a.createElement)(i.Button,{isSecondary:!0,onClick:()=>(n=>{e||(t(n.id),(0,d.recordEvent)("settings_payments_recommendations_setup",{extension_selected:n.plugins[0]}),h([n.plugins[0]]).then((()=>{f(!0)})).catch((e=>{(0,p.a)(e),t(null)})))})(n),isBusy:e===n.id,disabled:!!e},n.actionText||(0,o.__)("Get started","woocommerce-admin")),before:(0,a.createElement)("img",{src:n.square_image||n.image,alt:""})})));return(0,a.createElement)(i.Card,{size:"medium",className:"woocommerce-recommended-payments-card"},(0,a.createElement)(i.CardHeader,null,(0,a.createElement)("div",{className:"woocommerce-recommended-payments-card__header"},(0,a.createElement)(m.Text,{variant:"title.small",as:"p",size:"20",lineHeight:"28px"},(0,o.__)("Additional ways to get paid","woocommerce-admin")),(0,a.createElement)(m.Text,{className:"woocommerce-recommended-payments__header-heading",variant:"caption",as:"p",size:"12",lineHeight:"16px"},(0,o.__)('We recommend adding one of the following payment extensions to your store. The extension will be installed and activated for you when you click "Get started".',"woocommerce-admin"))),(0,a.createElement)("div",{className:"woocommerce-card__menu woocommerce-card__header-item"},(0,a.createElement)(s.EllipsisMenu,{label:(0,o.__)("Task List Options","woocommerce-admin"),renderContent:()=>(0,a.createElement)("div",{className:"woocommerce-review-activity-card__section-controls"},(0,a.createElement)(i.Button,{onClick:G},(0,o.__)("Hide this","woocommerce-admin")))}))),(0,a.createElement)(s.List,{items:P}),(0,a.createElement)(i.CardFooter,null,(0,a.createElement)(i.Button,{href:"https://woocommerce.com/product-category/woocommerce-extensions/payment-gateways/?utm_source=payments_recommendations",target:"_blank",isTertiary:!0},(0,o.__)("See more options","woocommerce-admin"),(0,a.createElement)(u.Z,{size:18}))))}},462:function(e,t,n){function a(e){return(e||"").split(":",1)[0]}function o(e){const t=a(e);return/^woocommerce(-|_)payments$/.test(t)?"wcpay":`${t.replace(/-/g,"_")}`.split(":",1)[0]}n.d(t,{V:function(){return a},b:function(){return o}})},72672:function(e,t,n){t.Z=function(e){var t=e.size,n=void 0===t?24:t,a=e.onClick,i=(e.icon,e.className),s=function(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,r),m=["gridicon","gridicons-external",i,!!function(e){return 0==e%18}(n)&&"needs-offset",!1,!1].filter(Boolean).join(" ");return o.default.createElement("svg",c({className:m,height:n,width:n,onClick:a},s,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}),o.default.createElement("g",null,o.default.createElement("path",{d:"M19 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h6v2H5v12h12v-6h2zM13 3v2h4.586l-7.793 7.793 1.414 1.414L19 6.414V11h2V3h-8z"})))};var a,o=(a=n(99196))&&a.__esModule?a:{default:a},r=["size","onClick","icon","className"];function c(){return c=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},c.apply(this,arguments)}}}]);